# StringUtils クラス仕様書

## 概要

StringUtils クラスは文字列に対する様々な操作を提供する静的メソッドのコレクションです。文字列の変換、検証、抽出機能を含みます。

## メソッド仕様

### reverse(str: string): string

**機能**: 文字列を逆順にした新しい文字列を返す

**入力パラメータ**:

- `str`: string - 逆順にする文字列

**戻り値**:

- string - 逆順になった文字列

**制約条件**:

- 入力文字列に制限なし（空文字列も許可）

**例外処理**:

- なし

**動作**:

- 文字単位で逆順に並び替え
- Unicode文字も正しく処理

---

### isPalindrome(str: string): boolean

**機能**: 文字列が回文（palindrome）かどうかを判定する

**入力パラメータ**:

- `str`: string - 判定する文字列

**戻り値**:

- boolean - 回文の場合true、そうでなければfalse

**制約条件**:

- 入力文字列に制限なし

**例外処理**:

- なし

**判定ルール**:

- 大文字小文字を区別しない
- 英数字以外の文字（空白、記号など）は無視
- 空文字列は回文として扱う

---

### capitalize(str: string): string

**機能**: 文字列の最初の文字を大文字に、残りを小文字に変換する

**入力パラメータ**:

- `str`: string - 変換する文字列

**戻り値**:

- string - 最初の文字が大文字に変換された文字列

**制約条件**:

- 入力文字列に制限なし

**例外処理**:

- なし

**動作**:

- 空文字列やnull/undefinedの場合は、そのまま返す
- 最初の文字のみ大文字化、2文字目以降は小文字化

---

### countWords(str: string): number

**機能**: 文字列内の単語数をカウントする

**入力パラメータ**:

- `str`: string - 単語数を数える文字列

**戻り値**:

- number - 単語数

**制約条件**:

- 入力文字列に制限なし

**例外処理**:

- なし

**カウントルール**:

- 空文字列や空白のみの文字列は0
- 連続する空白は1つの区切りとして扱う
- 前後の空白は無視

---

### truncate(str: string, maxLength: number): string

**機能**: 文字列を指定された最大長で切り詰め、必要に応じて省略記号を追加する

**入力パラメータ**:

- `str`: string - 切り詰める文字列
- `maxLength`: number - 最大文字数

**戻り値**:

- string - 切り詰められた文字列（必要に応じて"..."を付加）

**制約条件**:

- maxLengthは0以上である必要がある

**例外処理**:

- `maxLength < 0` の場合: `Error("Maximum length cannot be negative")` をスロー

**動作**:

- 元の文字列がmaxLength以下の場合はそのまま返す
- 切り詰めた場合は末尾に"..."を追加
- "..."の3文字はmaxLengthに含まれない

---

### extractNumbers(str: string): number[]

**機能**: 文字列から数値を抽出して配列で返す

**入力パラメータ**:

- `str`: string - 数値を抽出する文字列

**戻り値**:

- number[] - 抽出された数値の配列

**制約条件**:

- 入力文字列に制限なし

**例外処理**:

- なし

**抽出ルール**:

- 連続する数字を1つの数値として認識
- 小数点は含まない（整数のみ）
- 負号は含まない（正の整数のみ）
- 数値が見つからない場合は空配列を返す

## テスト観点

### 同値分割法

- **正常値**:
  - 通常の文字列
  - 英数字混在文字列
  - 有効な最大長
- **異常値**:
  - 負の最大長
  - 特殊文字を含む文字列

### 境界値分析

- **文字列長**:
  - 空文字列（length = 0）
  - 単一文字（length = 1）
  - 非常に長い文字列
- **最大長**:
  - 0（最小値）
  - 文字列長と同じ
  - 文字列長より小さい/大きい

### エラーケース

- **負の最大長エラー**: truncate
- **null/undefined**: 該当メソッドでの処理

### 特殊文字・パターン

- **Unicode文字**: 絵文字、多バイト文字
- **空白パターン**:
  - 先頭/末尾空白
  - 連続空白
  - タブ、改行文字
- **回文パターン**:
  - 大文字小文字混在
  - 記号・空白を含む
  - 数字を含む
- **数値パターン**:
  - 連続数字
  - 分離された数字
  - 数字なし

### データ型

- **空値**: 空文字列、null、undefined
- **特殊文字**: 記号、空白、制御文字
- **文字エンコーディング**: UTF-8、特殊文字
